language: perl
cache: bundler

bundler_args: "--deployment"
sudo: required

dist: precise
#dist: trusty

perl:
- '5.24'
- '5.22'
- '5.20'
- '5.18'
- '5.16'
- '5.14'
- '5.12'

before_install:
- sudo apt-get install -qq libgd2-xpm-dev
- sudo apt-get install -qq libpng-dev

install:
- dzil authordeps | grep -vP '[^\w:]' | cpanm -v --notest --skip-satisfied
#- dzil listdeps   | grep -vP '[^\w:]' | grep -vP '^GD' | cpanm -v --skip-satisfied
- dzil listdeps   | grep -vP '[^\w:]' | cpanm -v --skip-satisfied

script:
- dzil authordeps --missing | cpanm --verbose --notest --skip-satisfied
- dzil smoke --release --author

notifications:
  slack:
    secure: MG/Ux8oDkG19FMKdW1dUh0RKY4auisraGeASgbKpngI2q22RvdbeWIq1CB8Qh/cBZIYvlD9CcM0FlbBekTM9iE3rH8Cm9J/kIQaYA2Cenz512nkaGZ78AtTwaCqfaOXmm4GfoG/BXBEP3CSZar1z3zHraxkn2QLHbLt+fEfH4qV4vgOaFiKiPGb5MYuBy4dLSmW7Z34synFqZgn13tYPUi6GyQcAksJJCHvlyfW4ziP6fCo0qHOacoNOyOgAy9y75auUUh13RGk630h4daND+DHF18qsUznu3BVz+OZfICYwQSpl/sdECTxLQRMAWvPqr3a1PdiN2xkyJ62UwA87Za8LGbTH8QkFvHjy2plmUSHGtv9cGkxoe++lxVG9RnWWMqAZghGs1A7kJptKfX6A8amq1q7PYz8VcMShkmGCxVAxMEwo94fJibPsQp3dv0v6ahdOKp80SWgIM+LykM4h1EjQ4wb7NigPYHeW2KRoskIPj5djiBfNaybyd/RvMaME5FjVAydDRaQ0h6ee5ESdA5ugEijvKug8bSiIFMLf2aSnbhnms3vrpzYNyHeWOWlc+iz2lITrjiAgRdVwF4QCmpAh9BP0Oe4tC9H1fU6gtZcbsGiABt06VPYUngUlqNON5x4GJmX7YXpRyjz0qRsPluK1IEOTEC9tBp/uzjY70gw=
